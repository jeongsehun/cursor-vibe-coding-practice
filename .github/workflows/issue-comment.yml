name: ì´ìŠˆ ìë™ ëŒ“ê¸€

on:
  issues:
    types: [opened, labeled, assigned]

jobs:
  auto-comment:
    runs-on: ubuntu-latest
    steps:
    - name: ìƒˆ ì´ìŠˆ í™˜ì˜ ëŒ“ê¸€
      if: github.event.action == 'opened'
      uses: actions/github-script@v7
      with:
        script: |
          const { owner, repo, number } = context.issue;
          const issue = context.payload.issue;
          
          const welcomeComment = `
          ğŸ‘‹ **ìƒˆë¡œìš´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!**
          
          ì´ìŠˆê°€ ë¹ ë¥´ê²Œ ì²˜ë¦¬ë  ìˆ˜ ìˆë„ë¡ ë‹¤ìŒ ì‚¬í•­ë“¤ì„ í™•ì¸í•´ì£¼ì„¸ìš”:
          
          ## âœ… ì´ìŠˆ ì²´í¬ë¦¬ìŠ¤íŠ¸
          
          ### ğŸ› ë²„ê·¸ ë¦¬í¬íŠ¸ì¸ ê²½ìš°:
          - [ ] í˜„ì¬ ë™ì‘ê³¼ ì˜ˆìƒ ë™ì‘ì´ ëª…í™•íˆ ê¸°ìˆ ë˜ì–´ ìˆë‚˜ìš”?
          - [ ] ì¬í˜„ ë‹¨ê³„ê°€ í¬í•¨ë˜ì–´ ìˆë‚˜ìš”?
          - [ ] í™˜ê²½ ì •ë³´ (Python ë²„ì „, OS ë“±)ê°€ í¬í•¨ë˜ì–´ ìˆë‚˜ìš”?
          - [ ] ì—ëŸ¬ ë©”ì‹œì§€ë‚˜ ë¡œê·¸ê°€ ì²¨ë¶€ë˜ì–´ ìˆë‚˜ìš”?
          
          ### âœ¨ ê¸°ëŠ¥ ìš”ì²­ì¸ ê²½ìš°:
          - [ ] ê¸°ëŠ¥ì˜ ëª©ì ê³¼ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ê°€ ëª…í™•í•œê°€ìš”?
          - [ ] ìˆ˜ìš© ê¸°ì¤€ì´ ì •ì˜ë˜ì–´ ìˆë‚˜ìš”?
          - [ ] ëŒ€ì•ˆì´ë‚˜ í•´ê²°ë°©ë²•ì„ ê³ ë ¤í•´ë³´ì…¨ë‚˜ìš”?
          
          ### ğŸ“‹ ì¼ë°˜ ì‚¬í•­:
          - [ ] ì œëª©ì´ êµ¬ì²´ì ì´ê³  ëª…í™•í•œê°€ìš”?
          - [ ] ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ (Streamlit, FastAPI, Agent)ê°€ ëª…ì‹œë˜ì–´ ìˆë‚˜ìš”?
          - [ ] ìš°ì„ ìˆœìœ„ê°€ ì ì ˆíˆ ì„¤ì •ë˜ì–´ ìˆë‚˜ìš”?
          
          ## ğŸ·ï¸ ë¼ë²¨ ì•ˆë‚´
          
          ì´ìŠˆì— ì ì ˆí•œ ë¼ë²¨ì´ ìë™ìœ¼ë¡œ í• ë‹¹ë©ë‹ˆë‹¤:
          - **type**: bug, enhancement, question, documentation
          - **component**: streamlit, fastapi, langgraph, tools
          - **priority**: critical, high, medium, low
          
          ## â±ï¸ ì²˜ë¦¬ ì˜ˆìƒ ì‹œê°„
          - ğŸ”´ Critical: 24ì‹œê°„ ì´ë‚´
          - ğŸŸ  High: 3ì¼ ì´ë‚´  
          - ğŸŸ¡ Medium: 1ì£¼ì¼ ì´ë‚´
          - ğŸŸ¢ Low: 2ì£¼ì¼ ì´ë‚´
          
          ë¹ ë¥¸ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜‘ì¡° ë¶€íƒë“œë¦½ë‹ˆë‹¤! ğŸš€
          `;
          
          await github.rest.issues.createComment({
            owner,
            repo,
            issue_number: number,
            body: welcomeComment
          });

    - name: ë¼ë²¨ ì¶”ê°€ ì‹œ ì•ˆë‚´ ëŒ“ê¸€
      if: github.event.action == 'labeled'
      uses: actions/github-script@v7
      with:
        script: |
          const { owner, repo, number } = context.issue;
          const label = context.payload.label;
          
          let labelComment = '';
          
          switch(label.name) {
            case 'priority:critical':
              labelComment = `
          ğŸš¨ **Critical ìš°ì„ ìˆœìœ„ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤**
          
          ì´ ì´ìŠˆëŠ” ìµœìš°ì„ ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤:
          - 24ì‹œê°„ ì´ë‚´ ì´ˆê¸° ì‘ë‹µ
          - ê°€ëŠ¥í•œ í•œ ë¹ ë¥¸ í•´ê²°
          - í•„ìš”ì‹œ hotfix ë°°í¬
          
          ê¸´ê¸‰í•œ ë¬¸ì œì´ë¯€ë¡œ ì¦‰ì‹œ í™•ì¸í•˜ê² ìŠµë‹ˆë‹¤! âš¡
              `;
              break;
              
            case 'type:bug':
              labelComment = `
          ğŸ› **ë²„ê·¸ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤**
          
          ë²„ê·¸ í•´ê²°ì„ ìœ„í•´ ë‹¤ìŒ ì •ë³´ê°€ ì¶”ê°€ë¡œ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
          - ìƒì„¸í•œ ì¬í˜„ ë‹¨ê³„
          - ì—ëŸ¬ ë¡œê·¸ ë˜ëŠ” ìŠ¤í¬ë¦°ìƒ·
          - í™˜ê²½ ì •ë³´ (Python ë²„ì „, OS, ë¸Œë¼ìš°ì € ë“±)
          - ì˜ˆìƒ ë™ì‘ vs ì‹¤ì œ ë™ì‘
          
          ì¶”ê°€ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ì‹œë©´ ë” ë¹ ë¥´ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ”§
              `;
              break;
              
            case 'type:enhancement':
              labelComment = `
          âœ¨ **ê¸°ëŠ¥ ê°œì„  ìš”ì²­ìœ¼ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤**
          
          ê¸°ëŠ¥ ê°œë°œì„ ìœ„í•´ ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ê²€í† í•˜ê² ìŠµë‹ˆë‹¤:
          - ê¸°ì¡´ ê¸°ëŠ¥ê³¼ì˜ í˜¸í™˜ì„±
          - êµ¬í˜„ ë³µì¡ë„ ë° ì¼ì •
          - ì‚¬ìš©ì ì˜í–¥ë„
          - ê¸°ìˆ ì  ì œì•½ì‚¬í•­
          
          ê²€í†  í›„ ê°œë°œ ê³„íšì„ ê³µìœ ë“œë¦¬ê² ìŠµë‹ˆë‹¤! ğŸ“‹
              `;
              break;
              
            case 'good first issue':
              labelComment = `
          ğŸ‘¶ **Good First Issueë¡œ í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤**
          
          ì´ ì´ìŠˆëŠ” ìƒˆë¡œìš´ ê¸°ì—¬ìì—ê²Œ ì í•©í•©ë‹ˆë‹¤:
          - ë³µì¡ë„ê°€ ë‚®ìŒ
          - ëª…í™•í•œ í•´ê²° ë°©ë²• ì¡´ì¬
          - ì¢‹ì€ í•™ìŠµ ê¸°íšŒ
          
          ê¸°ì—¬ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹œë‹¤ë©´ ì–¸ì œë“  ëŒ“ê¸€ë¡œ ì§ˆë¬¸í•´ì£¼ì„¸ìš”! ğŸ¤
              `;
              break;
              
            case 'help wanted':
              labelComment = `
          ğŸ†˜ **Help Wanted - ë„ì›€ì´ í•„ìš”í•©ë‹ˆë‹¤**
          
          ì´ ì´ìŠˆëŠ” ì»¤ë®¤ë‹ˆí‹°ì˜ ë„ì›€ì´ í•„ìš”í•©ë‹ˆë‹¤:
          - ì „ë¬¸ ì§€ì‹ì´ í•„ìš”í•˜ê±°ë‚˜
          - ì¶”ê°€ ë¦¬ì†ŒìŠ¤ê°€ í•„ìš”í•˜ê±°ë‚˜
          - ë‹¤ì–‘í•œ ê´€ì ì—ì„œì˜ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤
          
          ê´€ë ¨ ê²½í—˜ì´ ìˆìœ¼ì‹œë‹¤ë©´ ì˜ê²¬ì„ ê³µìœ í•´ì£¼ì„¸ìš”! ğŸ’¬
              `;
              break;
              
            default:
              return; // ê¸°ë³¸ ë¼ë²¨ë“¤ì— ëŒ€í•´ì„œëŠ” ëŒ“ê¸€ ì•ˆí•¨
          }
          
          if (labelComment) {
            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number: number,
              body: labelComment
            });
          }

    - name: ë‹´ë‹¹ì í• ë‹¹ ì‹œ ì•ˆë‚´ ëŒ“ê¸€
      if: github.event.action == 'assigned'
      uses: actions/github-script@v7
      with:
        script: |
          const { owner, repo, number } = context.issue;
          const assignee = context.payload.assignee;
          
          const assignmentComment = `
          ğŸ‘¤ **ë‹´ë‹¹ìê°€ í• ë‹¹ë˜ì—ˆìŠµë‹ˆë‹¤**
          
          **ë‹´ë‹¹ì**: @${assignee.login}
          
          ## ë‹¤ìŒ ë‹¨ê³„:
          1. ë‹´ë‹¹ìê°€ ì´ìŠˆë¥¼ ê²€í† í•©ë‹ˆë‹¤
          2. ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš° ëŒ“ê¸€ë¡œ ì§ˆë¬¸ë“œë¦½ë‹ˆë‹¤
          3. í•´ê²° ë°©ë²•ì„ í™•ì •í•˜ê³  ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤
          4. ì§„í–‰ ìƒí™©ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤
          
          @${assignee.login} ë‹˜, ì´ìŠˆ ê²€í† ë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤! 
          
          ì§ˆë¬¸ì´ë‚˜ ìš°ë ¤ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì„¸ìš”. ğŸ“
          `;
          
          await github.rest.issues.createComment({
            owner,
            repo,
            issue_number: number,
            body: assignmentComment
          });

    - name: ì»´í¬ë„ŒíŠ¸ë³„ ì „ë¬¸ê°€ ë©˜ì…˜
      if: github.event.action == 'opened'
      uses: actions/github-script@v7
      with:
        script: |
          const { owner, repo, number } = context.issue;
          const issue = context.payload.issue;
          const title = issue.title.toLowerCase();
          const body = issue.body.toLowerCase();
          
          let experts = [];
          
          // ì»´í¬ë„ŒíŠ¸ë³„ ì „ë¬¸ê°€ (ì‹¤ì œ ì‚¬ìš©ì‹œ ì‹¤ì œ GitHub ì‚¬ìš©ìëª…ìœ¼ë¡œ ë³€ê²½)
          if (title.includes('streamlit') || body.includes('streamlit') || 
              title.includes('frontend') || body.includes('frontend')) {
            // experts.push('@frontend-expert');
            console.log('Streamlit/Frontend ê´€ë ¨ ì´ìŠˆ ê°ì§€');
          }
          
          if (title.includes('fastapi') || body.includes('fastapi') || 
              title.includes('api') || body.includes('backend')) {
            // experts.push('@backend-expert');
            console.log('FastAPI/Backend ê´€ë ¨ ì´ìŠˆ ê°ì§€');
          }
          
          if (title.includes('agent') || body.includes('langgraph') || 
              title.includes('llm') || body.includes('langchain')) {
            // experts.push('@ai-expert');
            console.log('Agent/LLM ê´€ë ¨ ì´ìŠˆ ê°ì§€');
          }
          
          if (experts.length > 0) {
            const expertComment = `
          ğŸ¯ **ê´€ë ¨ ì „ë¬¸ê°€ì—ê²Œ ì•Œë¦¼**
          
          ì´ ì´ìŠˆì™€ ê´€ë ¨ëœ ì»´í¬ë„ŒíŠ¸ ì „ë¬¸ê°€ë“¤ì—ê²Œ ì•Œë¦¼ì„ ë³´ëƒˆìŠµë‹ˆë‹¤:
          ${experts.join(' ')}
          
          ì „ë¬¸ê°€ë“¤ì´ ê²€í†  í›„ ë„ì›€ì„ ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤! ğŸ‘¨â€ğŸ’»
            `;
            
            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number: number,
              body: expertComment
            });
          } 